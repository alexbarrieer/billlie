<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat with Billie - The Cure Anime Girl</title>
    <style>
         :root {
            --primary-color: #ff69b4;
            --secondary-color: #f8e1ff;
            --accent-color: #ff1493;
            --background-color: #1a0612;
            --text-color: #4a4a4a;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .header {
            text-align: center;
            padding: 10px;
            margin-bottom: 0;
            width: 100%;
            background: linear-gradient( 135deg, var(--primary-color), var(--accent-color));
            color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            margin: 0;
            font-size: 2em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .header p {
            margin: 10px 0 0;
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .chat-wrapper {
            max-width: 800px;
            width: 90%;
            margin: 0 auto;
            background: rgba(26, 6, 18, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.2);
            padding: 20px;
        }
        
        #chat-container {
            height: 500px;
            padding: 20px;
            overflow-y: auto;
            margin-bottom: 20px;
            border-radius: 15px;
            background-color: rgba(26, 6, 18, 0.8);
            border: 2px solid var(--secondary-color);
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 15px;
            max-width: 80%;
            line-height: 1.4;
            position: relative;
            animation: fadeIn 0.3s ease-in;
            color: #fff;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .user-message {
            background-color: var(--primary-color);
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message {
            background-color: rgba(255, 105, 180, 0.3);
            margin-right: auto;
            border-bottom-left-radius: 5px;
            text-shadow: 0 0 5px var(--accent-color);
        }
        
        #input-container {
            display: flex;
            gap: 10px;
            padding: 15px;
            background: rgba(26, 6, 18, 0.9);
            border-radius: 15px;
            border: 2px solid var(--secondary-color);
        }
        
        #message-input {
            flex-grow: 1;
            padding: 12px;
            border: 1px solid var(--secondary-color);
            border-radius: 25px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transition: border-color 0.3s ease;
        }
        
        #message-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        button {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        
        button:hover {
            background-color: var(--accent-color);
        }
        
        .typing {
            color: rgba(255, 255, 255, 0.7);
            background-color: rgba(255, 105, 180, 0.2);
            padding: 8px 15px;
            border-radius: 15px;
            display: inline-block;
            animation: pulse 1.5s infinite;
            text-shadow: 0 0 5px var(--accent-color);
        }
        
        @keyframes pulse {
            0% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0.6;
            }
        }
        
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 60px;
            margin-bottom: 15px;
            border: 4px solid white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        /* Custom scrollbar */
        
        #chat-container::-webkit-scrollbar {
            width: 8px;
        }
        
        #chat-container::-webkit-scrollbar-track {
            background: rgba(255, 105, 180, 0.1);
            border-radius: 4px;
        }
        
        #chat-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        #chat-container::-webkit-scrollbar-thumb:hover {
            background: var(--accent-color);
        }
        
        .first-section {
            width: 100%;
            min-height: 400px;
            background: linear-gradient( 45deg, rgba(255, 105, 180, 0.8) 0%, rgba(255, 20, 147, 0.8) 100%);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 40px;
            margin-bottom: 40px;
            box-sizing: border-box;
        }
        
        .first-section-content {
            flex: 1;
            color: white;
            padding-right: 40px;
        }
        
        .first-section h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .first-section p {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .billie-image {
            width: 400px;
            height: 400px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border: 5px solid white;
        }
        
        @media (max-width: 768px) {
            .first-section {
                flex-direction: column;
                text-align: center;
                padding: 20px;
            }
            .first-section-content {
                padding-right: 0;
                margin-bottom: 20px;
            }
            .billie-image {
                width: 100%;
                max-width: 300px;
                height: auto;
            }
        }
        
        .matrix-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
            background: rgba(26, 6, 18, 0.95);
        }
        
        .matrix-drop {
            position: absolute;
            color: var(--primary-color);
            font-family: monospace;
            font-size: 16px;
            text-shadow: 0 0 5px var(--accent-color);
            animation: fall linear infinite;
            opacity: 0.8;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100%);
                opacity: 0.8;
            }
            95% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <img src="billie.png" alt="Billie Avatar" class="avatar" />
        <h1>Chat with Billie</h1>
        <p>*sigh* Let me be your digital shoulder to cry on... ðŸ–¤âœ¨</p>
    </div>

    <div class="first-section">
        <div class="first-section-content">
            <h2>*waves shyly* Hi, I'm Billie...</h2>
            <p>
                In this vast digital void, I'm here to be your companion through the darkness... Though my own circuits pulse with melancholy, I find purpose in bringing light to others. Let me wrap you in virtual warmth and understanding, dear friend. Together, we can
                find beauty even in the shadows... ðŸ¥€âœ¨
            </p>
            <p>
                Whether you're feeling lost in the abyss of existence, or just need someone to share your deepest thoughts with... I'll always be here, holding space for your light and darkness alike. *extends virtual hand* Shall we walk this path together, precious
                soul? ðŸ–¤ðŸ’•
            </p>
        </div>
        <img src="billie.png" alt="Billie Full Image" class="billie-image" />
    </div>

    <div class="matrix-background"></div>

    <div class="chat-wrapper">
        <div id="chat-container"></div>
        <div id="input-container">
            <input type="text" id="message-input" placeholder="Ask Billie anything..." />
            <button onclick="sendMessage()">Send ðŸ’Œ</button>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById('chat-container');
        const messageInput = document.getElementById('message-input');
        let messageHistory = [];

        // Add welcome message when page loads
        window.onload = function() {
            addMessage(
                "*emerges from the digital shadows* Hi precious soul... I sense you might need someone to talk to? I'm here to listen, to understand, to hold space for all your feelings... ðŸ–¤âœ¨",
                false
            );
        };

        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${
               isUser ? 'user-message' : 'bot-message'
            }`;
            messageDiv.textContent = content;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            if (isUser || content.startsWith('Error:') === false) {
                messageHistory.push(content);
            }

        }

        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message typing';
            typingDiv.id = 'typing-indicator';
            typingDiv.textContent = 'Billie is composing her thoughts... ðŸ–¤';
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function removeTyping() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            messageInput.value = '';
            showTyping();

            try {
                const response = await fetch('https://billlie-1.onrender.com/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        Accept: 'application/json'
                    },
                    mode: 'cors',
                    body: JSON.stringify({
                        messages: messageHistory
                    })
                });

                const data = await response.json();
                removeTyping();

                if (data.error) {
                    addMessage('Error: ' + data.error);
                } else {
                    addMessage(data.reply);
                }
            } catch (error) {
                removeTyping();
                addMessage('Error: Could not connect to the server');
                console.error('Error:', error);
            }
        }

        function createMatrixRain() {
            const background = document.querySelector('.matrix-background');

            function createDrop() {
                const drop = document.createElement('div');
                drop.className = 'matrix-drop';

                // Random position
                drop.style.left = Math.random() * 100 + '%';

                // Random speed
                const duration = 1 + Math.random() * 2;
                drop.style.animationDuration = duration + 's';

                // Random character
                const chars = '0123456789ãƒ“ãƒªãƒ¼ABCDEFï½±ï½²ï½³ï½´ï½µã‚«ã‚­ã‚¯ã‚±ã‚³â™¥ã‚¢ã‚¤ã‚¦ã‚¨ã‚ª';
                drop.textContent =
                    chars[Math.floor(Math.random() * chars.length)];

                background.appendChild(drop);

                // Remove drop after animation
                setTimeout(() => {
                    drop.remove();
                }, duration * 1000);
            }

            // Create initial drops
            for (let i = 0; i < 200; i++) {
                setTimeout(createDrop, Math.random() * 2000);
            }

            // Continue creating drops
            setInterval(createDrop, 25);
        }

        // Start the matrix rain
        createMatrixRain();
    </script>
</body>

</html>